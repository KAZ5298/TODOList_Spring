<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
	  xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<!-- CSS -->
	<link rel="stylesheet" th:href="@{/webjars/bootstrap/5.3.0/css/bootstrap.min.css}">
	<!-- JS -->
	<script th:src="@{/webjars/popper.js/2.11.7/umd/popper.min.js}" defer></script>
	<script th:src="@{/webjars/bootstrap/5.3.0/js/bootstrap.min.js}" defer></script>
	<title>作業修正</title>
</head>

<body>
	<!-- ナビゲーション -->
	<nav class="navbar navbar-expand-md navbar-dark bg-primary">
	    <span class="navbar-brand">TODOリスト</span>
	    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent"
	        aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
	        <span class="navbar-toggler-icon"></span>
	    </button>
	    
	    <div class="collapse navbar-collapse" id="navbarSupportedContent">
	        <ul class="navbar-nav">
	            <li class="nav-item">
	                <a class="nav-link" th:href="@{/todo}">作業一覧</a>
	            </li>
	            <li class="nav-item">
	                <a class="nav-link" th:href="@{/todo/entry}">作業登録</a>
	            </li>
	        </ul>
	        
	        <div class="ms-auto">
	            <ul class="navbar-nav">
	                <li class="nav-item dropdown">
	                    <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" 
	                        role="button" data-bs-toggle="dropdown" aria-expanded="false">
	                        <span sec:authentication="principal.fullname"></span>さん
	                    </a>
	                    <div class="dropdown-menu dropdown-menu-end" aria-labelledby="navbarDropdown">
	                        <form method="post" th:action="@{/logout}">
	                            <button class="dropdown-item" type="submit">
	                                ログアウト
	                            </button>
	                        </form>
	                    </div>
	                </li>
	            </ul>
	        </div>
	    </div>
	</nav>
	<!-- ナビゲーション ここまで -->
	
	<!-- コンテナ -->
	<div class="container">
		<div class="row my-2">
			<div class="col-sm-3"></div>
			<div class="col-sm-6 alert alert-info text-center">
				作業内容を修正してください
			</div>
			<div class="col-sm-3"></div>
		</div>
		<!-- 入力フォーム -->
		<div class="row my-2">
		    <div class="col-sm-3"></div>
		    <div class="col-sm-6">
		        <form th:action="@{/todo/edit/{id}(id=${todoListForm.id})}" method="post" th:object="${todoListForm}">
		            <input type="hidden" th:field="*{id}" />
		            <div class="form-group mb-3">
		                <label for="itemName" th:text="#{itemName}"></label>
		                <input type="text" class="form-control" id="itemName" th:field="*{itemName}">
		                <div th:if="${#fields.hasErrors('itemName')}" class="text-danger" th:errors="*{itemName}"></div>
		            </div>
		            <div class="form-group mb-3">
		                <label for="userId" th:text="#{todo.user}"></label>
		                <select class="form-select" id="userId" th:field="*{userId}">
		                    <option th:value="${null}">--選択してください--</option>
		                    <option th:each="item : ${userList}" th:value="${item.id}"
		                            th:text="${item.familyName + ' ' + item.firstName}"></option>
		                </select>
		                <div th:if="${#fields.hasErrors('userId')}" class="text-danger" th:errors="*{userId}"></div>
		            </div>
		            <div class="form-group mb-3">
		                <label for="expireDate" th:text="#{expireDate}"></label>
		                <input type="date" class="form-control" id="expireDate" th:field="*{expireDate}">
		                <div th:if="${#fields.hasErrors('expireDate')}" class="text-danger" th:errors="*{expireDate}"></div>
		            </div>
		            <div class="form-check mb-3">
		                <input type="checkbox" class="form-check-input" th:field="*{isFinished}" value="true"
		                       th:checked="${todoListForm.isFinished}" />
		                <label for="isFinished" th:text="#{isFinished}"></label>
		            </div>
		            <input type="submit" value="更新" class="btn btn-primary">
		            <input type="button" value="キャンセル" class="btn btn-outline-primary" onclick="location.href='/todo';">
		        </form>
		    </div>
		    <div class="col-sm-3"></div>
		</div>
		<!-- 入力フォーム ここまで -->
	</div>
	<!-- コンテナ ここまで -->
</body>
</html>
